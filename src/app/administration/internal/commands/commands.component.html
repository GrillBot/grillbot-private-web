<app-navigation [navigation]="navigation"></app-navigation>

<div class=" row ms-0 me-0 mt-3">
    <div class="col">
        <app-card [title]="(interactions ? 'Integrované' : 'Textové') + ' příkazy'" [icon]="'fas fa-terminal'">
            <app-loading *ngIf="!data"></app-loading>

            <ng-container *ngIf="data">
                <form class="mb-1" [formGroup]="form">
                    <div class="form-group">
                        <label>Vyhledávání</label>
                        <input type="text" class="form-control form-control-sm" formControlName="searchQuery" />
                    </div>
                </form>

                <table class="table table-sm table-bordered table-striped auto-column-width">
                    <thead>
                        <tr>
                            <th>Příkaz</th>
                            <th>Poslední volání</th>
                            <th>Úspěšných</th>
                            <th>Chybných</th>
                            <th>Úspěšnost</th>
                            <th>Min. doba běhu</th>
                            <th>Max. doba běhu</th>
                            <th>Celk. doba běhu</th>
                            <th>Prům. doba běhu</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let item of data" [class.bg-warning]="item.successRate > 25 && item.successRate < 50"
                            [class.bg-danger]="item.successRate <= 25">
                            <td>{{item.command}}</td>
                            <td>{{item.lastCall.toLocaleString()}}</td>
                            <td>{{item.successCount}}</td>
                            <td>{{item.failedCount}}</td>
                            <td>{{item.successRate}} %</td>
                            <td>{{item.minDuration}} ms</td>
                            <td>{{item.maxDuration}} ms</td>
                            <td>{{item.totalDuration}} ms</td>
                            <td>{{item.avgDuration}} ms</td>
                        </tr>
                        <tr *ngIf="data.length === 0">
                            <td colspan="5">Ještě nebyl zavolán žádný příkaz.</td>
                        </tr>
                    </tbody>
                </table>
            </ng-container>
        </app-card>
    </div>
</div>
